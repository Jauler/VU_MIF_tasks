%Įvade aprašomi darbo tikslai, nurodomas temos aktualumas, aptariamos teorinės
%darbo prielaidos bei metodologija, apibrėžiamas tiriamasis objektas,
%apibūdinami su tema susiję literatūros ar kitokie šaltiniai, temos analizės
%tvarka, darbo atlikimo aplinkybės, pateikiama žinių apie naudojamus
%instrumentus (programas ir kt.). Rekomenduojama įvado apimtis 3-4 puslapiai.

\sectionnonum{Įvadas}

% Kas yra biometrines identifikavimo sistemos
Kiekvieno žmogaus kūnas turi aibę savybių, kurios gali unikaliai jį identifikuoti (pvz.: pirštų atspaudai).
Šių savybių egzistavimas davė pagrindą {\it biometrinėms identifikavimo sistemoms}.
Biometrinio identifikavimo sistema yra tokia sistema, kuri geba palyginti kandidato biometrinius įrašus su aibe kitų biometrinių įrašų ir atrinkti kurie iš jų galėtų priklausyti tam pačiam žmogui.
Tokiose sistemose yra poreikis gebėti atrinkti poaibį visų žinomų biometrinių įrašų, su kuriais būtų atliekamas biometrinis palyginimas.

% Kas yra biografinė užklausa ir biografiniai atributai?
Šio poaibio sudarymas bei biometrinių įrašų palyginimas vadinamas {\it biografinių užklausų apdorojimu}.
Atrinkimas yra vykdomas pagal {\it biografinius atributus}.
Su kiekvienu biometriniu įrašu siejama aibė biografinių atributų (žr.: \ref{tab:exampleGallery} lentelę).
Biografinis atributas tai yra papildomas duomuo (pvz.: žmogaus amžius, lytis, šalis kurioje gyvena ir pan.), kuris gali būti:
\begin{itemize}
\item skaitinio tipo
\item simbolių eilutės (ang.: {\it string}) tipo
\end{itemize}

Esant poreikiui šis sąrašas gali būti plečiamas, tačiau darbo metu bus daroma prielaida, kad visi to pačio tipo atributai gali būti palyginami tarpusavyje.
Bei visų galimų konkretaus tipo reikšmių aibė turi griežtą tvarką (ang.: {\it totally ordered}) palyginimo funkcijos atžvilgiu.

Taip pat su biografine užklausa yra siejamas predikatas, pagal kurį yra įvertinama kiekvieno biometrinio įrašo biografinių atributų aibė siekant sudaryti įrašų poaibį palyginimams.
Šis poaibis ir yra tas, su kuriuo bus atliekamas biometrinis palyginimas.

\begin{table}[H]\footnotesize
	\centering
	\begin{tabular}{|c|c|c|c|}
		\hline
		\multirow{2}{*}{{\bf Subjektas}} & \multirow{2}{*}{{\bf Biometriniai duomenys}} & \multicolumn{2}{|c|}{{\bf Biografiniai atributai}}  \\ \cline{3-4}
		& & {\bf Piršto atspaudo pozicija} & {\bf Amžius} \\
		\hline
		Jonas  & biometrinis įrašas & Kairys nykštys  & 25 \\ \cline{2-4}
		       & biometrinis įrašas & Dešinys nykštys & 25 \\
		\hline
		Mindaugas & biometrinis įrašas & Kairys nykštys  & 35 \\ \cline{2-4}
		          & biometrinis įrašas & Dešinys nykštys & 35 \\
		\hline
	\end{tabular}
	\caption{Pavyzdiniai biometrinės identifikavimo sistemos duomenys}
	\label{tab:exampleGallery}
\end{table}

% Kas yra biografinė schema?
Visų biografinių atributų prasmių aibė vadinama {\it biografine schema}. Pavyzdžiui \ref{tab:exampleGallery} lentelę atitinkanti biografinė schema būtų \{„Piršto atspaudo pozicija“, „Amžius“\}.

\paragraph{Biografinių užklausų predikatai}

Vykstant biografinės užklausos apdorojimui, su ja susietas predikatas apsprendžia aibę biometrinių įrašų, kurie bus lyginami su kandidato biometriniu įrašu.
Į šią aibę patenka tik tie biometriniai įrašai, kurių biografinių atributų aibė tenkina užklausos predikatą.
Predikatai sistemai yra aprašomi specialia tam skirta kalba.
\ref{tab:queryBNF} lentelė pateikia šios kalbos BNF formą.

\begin{table}[H]\footnotesize
	\centering
	\begin{tabular}{|l c l|}
		\hline
		predikatas                    & ::= & <išraiška> \\
		išraiška                      & ::= & <vienaris operatorius> <operandas> | \\
									  &     & \multicolumn{1}{l|}{<operandas> <dvinaris operatorius> <operandas> |} \\
									  &     & \multicolumn{1}{l|}{"(" <išraiška> ")" |} \\
									  &     & \multicolumn{1}{l|}{ <atributo vardas> <sąrašo operatorius> <sąrašas>} \\
		operandas                     & ::= & <išraiška> | <atributo vardas> | "'" <skaičius> "'" | "'" <žodis> "'" \\
		vienaris operatorius          & ::= & <neprivalomas tarpas> "NOT" <neprivalomas tarpas> \\
		dvinaris operatorius          & ::= & <neprivalomas tarpas> <dvinario operatoriaus ženklas> <neprivalomas tarpas> \\
		dvinario operatoriaus ženklas & ::= & ">" | ">=" | "<" | "<=" | "=" | "<>" | "AND" | "OR" \\
		sąrašo operatorius            & ::= & <neprivalomas tarpas> "IN" <neprivalomas tarpas> \\
		sąrašas                       & ::= & "(" <sąrašo elementai> ")" \\
		sąrašo elementai              & ::= & <sąrašo elementas> | <sąrašo elementas> "," <sąrašo elementai> \\
		sąrašo elementas              & ::= & "'" <žodis> "'" | "'" <skaičius> "'" \\
		atributo vardas               & ::= & <neprivalomas tarpas> <žodis> <neprivalomas tarpas> \\
		neprivalomas tarpas           & ::= & "" | " " <neprivalomas tarpas> \\
		žodis                         & ::= & <raidė> | <žodis> <raidė> | <žodis> <skaičius> \\
		skaičius                      & ::= & "0" | "1" | "2" | "3" | "4" | "5" | "6" | "7" | "8" | "9" \\
		raidė                         & ::= & "A" | "B" | "C" ... "Z" | "a" | "b" | "c" ... "z"  \\
		\hline
	\end{tabular}
	\caption{Biografinės užklausos predikato aprašymo kalbos BNF forma}
	\label{tab:queryBNF}
\end{table}

Keletas užklausos predikato aprašymo pavyzdžių pateikiama \ref{tab:queryExamples} lentelėje.

\begin{table}[H]\footnotesize
	\centering
	\begin{tabular}{|c|l|}
		\hline
		{\bf Užklausos predikato aprašymas} & {\bf Užklausos prasmė} \\
		\hline
		Amzius > '18' & Visi suaugę žmonės\\
		\hline
		Amzius > '18' AND Miestas IN ('Vilnius', 'Kaunas', 'Klaipeda') & Visi suagę vilniečiai, kauniečiai ir klaipėdiečiai \\
		\hline
		NOT (Miestas = 'Vilnius' AND Amzius > '18') & Visi žmonės išskyrus suaugusius vilniečius \\
		\hline
	\end{tabular}
	\caption{Užklausų predikato aprašymo pavyzdžiai.}
	\label{tab:queryExamples}
\end{table}

% Sistemos greičio svarba, paminim, kad dirbsim su Neurotechnology akseleratorium
\paragraph{Sistemos greitis}

Biometrinio identifikavimo sistemos darbo greitis yra labai aktuali sistemos savybė.
Kartais \cite{NeurotechnologyDRCDedublicationProject} \cite{NeurotechnologyVenezuelaDedublicationProject} tai yra pagrindinis faktorius apsprendžiantis projekto trukmę.
Šiame darbe bus nagrinėjami metodai padedantys optimizuoti bendrą UAB „Neurotechnolgy“ biometrinės identifikavimo sistemos \cite{NeurotechnologyMegamatcherAccelerator} darbo greitį vykdant biografines užklausas.

% Visa duomenų bazė RAM`e
Tipinės biografinės užklausos metu palyginimui yra atrenkama didelė dalis visų sistemai žinomų biometrinių įrašų.
Tai lėmė dizaino sprendimą saugoti visus sistemai žinomus biometrinius įrašus operatyviojoje kompiuterio ar serverio atmintyje darbo metu.

% Introducinam batch processingą ir blokus
UAB „Neurotechnology“ biometrinio palyginimo algoritmai yra optimizuoti siekiant pagerinti procesoriaus spartinančiosios atminties išnaudojimą.
Dėl šios priežasties biometriniai įrašai atmintyje laikomi optimizuojant atminties prieigos vientisumą.
Tačiau ribotas spartinančiosios atminties kiekis lemia, kad atminties prieigos vientisumo poveikis juntamas tik iki tam tikro, nuo konkretaus procesoriaus priklausančio, atminties bloko dydžio.
Tai lėmė, kad biometriniai įrašiai yra saugomi {\it biometrinių įrašų blokuose}.
Biometrinių įrašų blokas yra visų žinomų biometrinių įrašų poaibis saugomas vientisame atminties bloke.

Keletas svarbių biometrinių įrašų blokų savybių:
\begin{itemize}
\item Visų blokų dydžiai sistemoje yra vienodi.
\item Kiekvienas biometrinis įrašas yra saugomas tiktai viename bloke siekiant maksimizuoti bendrą sistemos biometrinių įrašų talpą.
\item Blokai gali turėti tuščių vietų.
\item Maksimalus blokų kiekis yra ribotas ir apsrendžiamas techninės įrangos.
\end{itemize}

% Matchinam blokais
Taip pat svarbu pastebėti tai, kad atliekant biometrinę identifikaciją biometrinio palyginimo operacijos yra vykdomos įrašų blokams, o ne pavieniams įrašams.
Todėl net jeigu bloke yra įrašų, kurie neatitinka biografinės užklausos predikato, su jais vistiek yra vykdomas biometrinis palyginimas, tačiau jie neįtraukiami į galutinius rezultatus.

%\begin{figure}[H]
%\begin{center}
%\includegraphics[width=0.4\textwidth]{img/BiometricRecordBlocks.eps}
%\caption{Pavyzdiniai biometrinių įrašų blokai. \\ Čia taškai -- įrašai, o stačiakampiai -- blokai}
%\label{img:exampleGallery}
%\end{center}
%\end{figure}

% Aprašom problemą, kaip daugiamatės erdvės partitioningą.
\paragraph{Duomenų reprezentacija}

Šiame darbe biometriniai įrašai modeliuojami kaip taškai daugiamatėje erdvėje panašiai kaip \cite{marcel2000modeling} aptariamas „Data cube“ (žr.: \ref{img:multidimensionalGallery} pav.).
Kiekviena erdvės ašis siejama su vieno atributo reikšmių aibe.
Daroma prielaida, kad kiekvienam atributo tipui yra apibrėžta palyginimo funkcija, kuri apibrėžia griežtą reikšmių tvarką (ang.: {\it total order}).
Pavyzdžiui simbolių eilutės tipo atributam galima palyginimo funcija būtų tokia, kuri palygina atributus leksikografiškai.
Skaitiniai atributai gali būti rūšiuojami natūralia numerine tvarka.
Atributų reikšmės pagal šią tvarką yra priskiriamos ašims (žr.: \ref{img:multidimensionalGallery} pav.).

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.5\textwidth]{img/MultidimensionalGallery.png}
\caption{Pavyzdiniai biometriniai įrašai dviejų atributų (dvimatėje) reikšmių erdvėje.}
\label{img:multidimensionalGallery}
\end{center}
\end{figure}

% Biometrinių įrašų blokai - particijos daugiamatėje erdvėje
\paragraph{Įrašų blokai daugiamatėje erdvėje}

Biometriniai įrašai saugomi tik viename iš ankščiau minėtų biometrinių įrašų blokų, todėl šiuos blokus patogu analizuoti kaip daugiamatės erdvės particijas (žr.: \ref{img:multidimensionalPartitionedGallery} pav.).
Verta paminėti, kad particija nebūtinai turi būti sulygiuota pagal erdvės ašis (nebūtinai turi būti stačiakampis dvimatės erdvės atveju ar gretasienis trimatėje erdvėje...).
Taip pat, viena particija gali susidėti iš daugiau nei vienos, nebūtinai jungios dalies.
Toks modelis nepraranda bendrumo ir leidžia atvaizduoti bet kokį biometrinių įrašų paskirstymą į blokus su bet kiek atributų.

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.5\textwidth]{img/MultidimensionalPartitionedGallery.png}
\caption{Pavyzdinis skirstymas particijomis. P1-P3 - particijos atitinkančios biometrinių įrašų blokus}
\label{img:multidimensionalPartitionedGallery}
\end{center}
\end{figure}

Tokio modelio kontekste biometrinių įrašų pridėjimas į sistemą susideda iš šių poproblemių:
\begin{enumerate}
\item Parinkimo į kurią particiją bus įdedamas įrašas.
\item Įrašų kiekiui viršyjus konstantinę ribą, particijos skėlimo į naujas particijas.
\end{enumerate}

Verta pastebėti, kad sistema yra pritaikyta dirbti su didelais kiekiais įrašų, tad jų pridėjimo, bei biometriniam palyginimui skirto poaibio atrinkimo operacijos negali atsižvelgti į visus sistemoje esančius įrašus.
Tai apriboja optimizacijas, kurias galima atlikti skirstant įrašus į blokus.
Taip pat, įrašų perskirstymas į blokus, gali vykti nebent iteratyviai.


\paragraph{Užklausų reprezentacija}

Biografinės užklausos aprašomos \ref{tab:queryBNF} lentelėje gali apibrėžti bet kokį atributų reikšmių poaibį ir atitinkamai -- bet kokį biometrinių įrašų poabį.
Neprarandant bendrumo šiuos poaibius nagrinėsime kaip vieną ar daugiau uždarų plotų atributų erdvėje -- poerdvių (žr.: \ref{img:multidimensionalPartitionedGalleryWithQuery} pav.). %todo: citata
O ankščiau apibūdintas predikatas bus išreiškiamas kaip funkcija, kuri nustato ar biometrinių įrašų blokas persidengia su nors vienu iš užklausos poerdvių.

\begin{figure}[H]
\begin{center}
\includegraphics[width=0.5\textwidth]{img/MultidimensionalPartitionedGalleryWithQuery.png}
\caption{Pavyzdinė užklausa, kurios metu būtų palyginimi P1 ir P3 blokai.}
\label{img:multidimensionalPartitionedGalleryWithQuery}
\end{center}
\end{figure}

Bendruoju atveju, kuo užklausos poerdviai geriau atitinka biometrinių įrašų particijas, tuo mažiau atliekama nereikalingų biometrinių palyginimų.

\paragraph{Blokų užpildymo problema}

Biometrinių įrašų bloko dydis yra apribotas iš viršutinės pusės ir konkretaus bloko įrašų kiekiui pasiekus tą ribą, blokas yra skeliamas į du naujus.
Tai reiškia, kad priklausomai nuo metodo, pagal kurį įrašai yra skirstomi į blokus, blokai yra užpildyti nuo 50\% iki 100\%.
Verta pastebėti, kad neužpildytos vietos blokuose bereikalo švaisto atmintį ir blogiausiu atveju, kai užpildymas yra 50\% -- išvaistoma pusė blokam skirtos atminties.
Todėl šiame darbe būtina atsižvelgti į šią problemą.

\paragraph{Darbo tikslas}

Šio darbo metu siekiama aprašyti bei įvertinti keletos biometrinių įrašų skaidymo į blokus metodų poveikį bendram UAB „Neurotechnolgy“ sistemos darbo greičiui bei palyginti juos su nemodifikuota sistema.
Įvertinimas remiasi sąlyga, kad yra naudojamos biografinės užklausos realistiškai atspindinčios užklausas pasitaikančias realiose instaliacijose.
Darbo metu bus nagrinėjami du metodai:
\begin{itemize}
		\item Metodas paremtas priešdėliniu rūšavimu, kuris nuo šiol bus vadinamas „Prefix search“.
		\item Metodas paremtas daugiamačiu „K-d medžiu“.
\end{itemize}

Darbą planuojama skirstyti į tokius uždavinius:

\begin{enumerate}
	\item Pasiruošti testavimo duomenis, išanalizuoti tipinių užklausų statistines savybes.
	\item Empiriškai įvertinti sistemos greičio priklausomybę nuo maksimalaus biometrinių įrašų bloko dydžio.
	\item Surasti sprendimą blokų užpildymo problemai.
	\item Apibrėžti bei įvertinti metodą paremtą „Prefix search“ biometrinių įrašui skirstymu į blokus.
	\item Apibrėžti bei įvertinti metodą paremtą „K-d medžiu“ biometrinių įrašui skirstymu į blokus.
\end{enumerate}

Šis darbas struktūrizuojamas taip:
I skyriuje apžvelgiami kiti panašūs darbai, aptariama kas jau buvo daroma, kuo remiasi šis darbas.
II skyriuje nagrinėjamos užklausos.
Kokios savybės išplaukia iš apibrėžtos užklausų gramatikos, kokiomis statistinėmis savybėmis pasižymi UAB „Neurotechnolgy“ klientų dažniausiai pateikiamos užklausos.
Aprašoma kaip bus palyginami skirstymo į blokus metodai, bei aprašomas testavimo duomenų rinkinys.
III skyriuje empiriškai nustatoma maksimalaus bloko dydžio poveikis sistemos darbo greičiui.
Parenkamas bloko dydis, kuris bus naudojamas „Prefix search“ ir „K-d medžio“ metodų įvertinimui.
IV skyriuje aptariama blokų užpildymo problema, pateikiamas galimas sprendimas remiantis virtualios atminties principais.
V skyriuje apibrėžiamas „Prefix search“ metodas atributų skirstymui į blokus, įvertinamos jo efektyvumas.
VI Skyriuje apibrėžiamas „K-d medžiu“ paremtas metodas atributų skirstymui į blokus, įvertinamas jo efektyvumas.
Ir galiausiai aprašomi pasiekti rezultatai, ateities darbų kryptys bei pateikiamos išvados.


